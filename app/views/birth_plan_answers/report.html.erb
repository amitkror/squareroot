<div class="pdf-content">
    <% Question::CATEGORY_TYPES.each do |cat| %>
        <div class="row">
            <h2><%= @user.first_name.titleize %> Report</h2>
            <table width="100%" style="font-family:'AvrNx';" >
                <% @questions = Question.where(:category => cat) %>
                <h3 align='center'><b><u><%= cat %></u></b></h3>
                <% @questions.each_with_index do |question, index| %>
                    <% ques = @birth_plan_answers.find_by(:question_id => question.id) %>
                    
                     <tr>
                      <td>Q.<%= index+1 %>: <%= question.try(:title) %></td>
                    </tr>
                    <tr>
                        <td>
                            <% if ques.present? %>
                                <% if ques.answer.present? %>
                                    <%= ques.answer %>
                                <% else %>
                                    <% if  ques.answer_options.present? %>
                                        <% ques.answer_options.each do |answer| %>
                                            <%= answer.option.try(:option_title) %>
                                            <% if answer.textbox_answer.present? %>
                                                : <b><%= answer.textbox_answer %></b>
                                            <% end %><br>
                                        <% end %>
                                    <% end %>
                                <% end %>
                            <% else %>
                                Not Filled
                            <% end %>
                      </td>
                    </tr>
                <% end %>
            </table>
        </div>
        <div class="page-break"></div>
    <% end %>
</div>
